# üîß Soluci√≥n de Problemas - Servidor Unificado

## üö® **Problemas Comunes y Soluciones**

### **1. Errores de TypeScript**

#### **Problema:**
```
TS6133: 'variable' is declared but its value is never read
TS2339: Property 'property' does not exist on type 'Type'
```

#### **Soluci√≥n:**
```bash
# Usar build simple sin TypeScript
npm run build:simple

# O usar el script de desarrollo simple
npm run dev:simple
```

### **2. Puerto ya en uso**

#### **Problema:**
```
Error: listen EADDRINUSE: address already in use :::3000
```

#### **Soluci√≥n:**
```bash
# Cambiar puerto
PORT=3001 node unified-server.js

# O matar procesos en el puerto
# Windows:
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# Linux/Mac:
lsof -ti:3000 | xargs kill -9
```

### **3. Build falla**

#### **Problema:**
```
Error: Build failed with errors
```

#### **Soluci√≥n:**
```bash
# Limpiar y reconstruir
rm -rf dist/
npm run build:simple

# O usar el script autom√°tico
start-unified.bat
```

### **4. M√≥dulos no encontrados**

#### **Problema:**
```
Cannot find module 'express'
```

#### **Soluci√≥n:**
```bash
# Reinstalar dependencias
npm install

# Verificar que todas las dependencias est√©n instaladas
npm list --depth=0
```

## üõ†Ô∏è **Comandos de Desarrollo**

### **Desarrollo R√°pido (Sin TypeScript)**
```bash
npm run dev:simple
```

### **Desarrollo con TypeScript**
```bash
npm run build
node unified-server.js
```

### **Script Autom√°tico (Windows)**
```bash
start-unified.bat
```

## üìä **Verificaci√≥n del Sistema**

### **1. Verificar que el servidor est√© funcionando**
```bash
curl http://localhost:3000/test-connection
```

**Respuesta esperada:**
```json
{
  "success": true,
  "message": "Conexi√≥n exitosa al servidor unificado",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

### **2. Verificar que el frontend se sirva**
```bash
curl http://localhost:3000
```

**Respuesta esperada:** HTML de la aplicaci√≥n React

### **3. Verificar APIs de autenticaci√≥n**
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"demo@example.com","password":"test"}'
```

## üîç **Debugging**

### **Logs del Servidor**
El servidor muestra logs detallados:
```
üöÄ Servidor unificado ejecut√°ndose en http://localhost:3000
‚úÖ Usuario registrado: user@example.com (role: pending)
‚úÖ Usuario logueado: demo@example.com (role: approved)
```

### **Errores Comunes**

#### **Error: "Cannot find module"**
- **Causa**: Dependencias no instaladas
- **Soluci√≥n**: `npm install`

#### **Error: "Port already in use"**
- **Causa**: Otro proceso usando el puerto
- **Soluci√≥n**: Cambiar puerto o matar proceso

#### **Error: "Build failed"**
- **Causa**: Errores de TypeScript
- **Soluci√≥n**: Usar `npm run build:simple`

## üöÄ **Optimizaciones**

### **1. Para Desarrollo R√°pido**
```bash
# Usar build simple
npm run build:simple && node unified-server.js
```

### **2. Para Producci√≥n**
```bash
# Usar build completo con TypeScript
npm run build && node unified-server.js
```

### **3. Para Debugging**
```bash
# Con logs detallados
DEBUG=* node unified-server.js
```

## üìã **Checklist de Verificaci√≥n**

### **Antes de Iniciar:**
- [ ] Node.js instalado (`node --version`)
- [ ] Dependencias instaladas (`npm install`)
- [ ] Puerto 3000 libre
- [ ] Archivo `dist/` existe (despu√©s del build)

### **Despu√©s de Iniciar:**
- [ ] Servidor responde en `http://localhost:3000`
- [ ] API funciona en `http://localhost:3000/api`
- [ ] Frontend se carga correctamente
- [ ] No hay errores en la consola

### **Para Testing:**
- [ ] Login funciona con usuarios de prueba
- [ ] Panel de administraci√≥n accesible
- [ ] APIs de Notion funcionan (si configuradas)

## üÜò **Soporte**

### **Si nada funciona:**
1. **Reiniciar todo:**
   ```bash
   # Parar todos los procesos
   # Windows: Ctrl+C en todas las terminales
   # Linux/Mac: pkill node
   
   # Limpiar y reinstalar
   rm -rf node_modules/
   npm install
   npm run build:simple
   node unified-server.js
   ```

2. **Verificar configuraci√≥n:**
   - Node.js versi√≥n 16+
   - npm versi√≥n 8+
   - Puerto 3000 libre

3. **Usar modo de emergencia:**
   ```bash
   # Solo servidor sin frontend
   node unified-server.js
   # Luego abrir http://localhost:3000 en el navegador
   ``` 