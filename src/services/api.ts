// L√≥gica base para llamadas a la API
const API_URL =
  window.location.hostname === 'localhost'
    ? 'http://localhost:3003'
    : '/api'; // En producci√≥n, usa rutas relativas (Vercel serverless o proxy)

export async function apiFetch(endpoint: string, options: RequestInit = {}) {
  const url = `${API_URL}${endpoint}`;
  
  console.log('üîó API Request:', {
    url,
    method: options.method || 'GET',
    body: options.body
  });
  
  const res = await fetch(url, {
    credentials: 'include',
    ...options,
  });
  
  console.log('üìä API Response:', {
    status: res.status,
    ok: res.ok
  });
  
  if (!res.ok) {
    const errorData = await res.json().catch(() => ({ error: 'Error desconocido' }));
    console.error('‚ùå API Error:', errorData);
    throw new Error(errorData.error || 'Error en la API');
  }
  
  return res.json();
} 