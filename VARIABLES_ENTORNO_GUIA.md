# üîß Gu√≠a Completa: Variables de Entorno

## üìÅ **Paso 1: Crear el archivo .env**

Crea un archivo llamado `.env` en la ra√≠z del proyecto (al mismo nivel que `package.json`):

```bash
# En la ra√≠z del proyecto
touch .env
# O en Windows:
echo. > .env
```

## üìù **Paso 2: Configurar las variables**

Abre el archivo `.env` y agrega el siguiente contenido:

```env
# ===== CONFIGURACI√ìN DE NOTION =====

# Token de integraci√≥n de Notion
# Obtener en: https://www.notion.so/my-integrations
NOTION_TOKEN=your_notion_integration_token_here

# ID de la base de datos de leads
# Obtener de la URL de tu base de datos en Notion
NOTION_LEADS_DATABASE_ID=your_leads_database_id_here

# ===== CONFIGURACI√ìN DEL SERVIDOR =====

# Puerto del servidor (opcional, por defecto 3000)
PORT=3000

# ===== CONFIGURACI√ìN DE DESARROLLO =====

# URL base de la API para desarrollo local
VITE_API_BASE_URL=http://localhost:3000/api

# ===== CONFIGURACI√ìN DE SEGURIDAD =====

# JWT Secret (para producci√≥n)
JWT_SECRET=your_jwt_secret_here
```

## üîë **Paso 3: Obtener las variables de Notion**

### **Obtener NOTION_TOKEN:**

1. Ve a [https://www.notion.so/my-integrations](https://www.notion.so/my-integrations)
2. Click en "New integration"
3. Dale un nombre como "Sistema de Acceso"
4. Selecciona tu workspace
5. Click en "Submit"
6. Copia el "Internal Integration Token"
7. Reemplaza `your_notion_integration_token_here` con el token

### **Obtener NOTION_LEADS_DATABASE_ID:**

1. Abre tu base de datos de leads en Notion
2. Copia la URL completa
3. El ID est√° en la URL: `https://notion.so/workspace/[DATABASE_ID]?v=...`
4. Copia solo el ID (sin los guiones)
5. Reemplaza `your_leads_database_id_here` con el ID

## ‚úÖ **Paso 4: Verificar la configuraci√≥n**

Ejecuta el comando de verificaci√≥n:

```bash
npm run check-env
```

**Respuesta esperada si est√° bien configurado:**
```
‚úÖ NOTION_TOKEN: Configurado
‚úÖ NOTION_LEADS_DATABASE_ID: Configurado
‚úÖ Todas las variables requeridas est√°n configuradas
üöÄ El sistema puede conectarse a Notion
```

## üß™ **Paso 5: Probar el sistema**

### **Reiniciar el servidor:**
```bash
npm run dev:simple
```

### **Verificar logs del servidor:**
```
üöÄ Servidor unificado ejecut√°ndose en http://localhost:3000
‚úÖ NOTION_TOKEN configurado
‚úÖ NOTION_LEADS_DATABASE_ID configurado
```

### **Probar en el navegador:**
1. Abrir `http://localhost:3000`
2. Login con `admin@example.com`
3. Ir al panel de administraci√≥n
4. Verificar que los datos vienen de Notion

## üö® **Soluci√≥n de Problemas**

### **Error: "Archivo .env encontrado: No"**
- Verificar que el archivo `.env` existe en la ra√≠z del proyecto
- Verificar que el nombre es exactamente `.env` (no `.env.txt`)

### **Error: "NOTION_TOKEN: No configurado"**
- Verificar que el token est√° copiado correctamente
- Verificar que no hay espacios extra
- Verificar que la integraci√≥n tiene permisos en la base de datos

### **Error: "NOTION_LEADS_DATABASE_ID: No configurado"**
- Verificar que el ID de la base de datos es correcto
- Verificar que la integraci√≥n tiene acceso a la base de datos
- Compartir la base de datos con la integraci√≥n

### **Error: "Token inv√°lido"**
- Regenerar el token en Notion
- Verificar que la integraci√≥n tiene permisos correctos
- Verificar que el workspace es el correcto

## üìä **Ejemplo de archivo .env completo**

```env
# Notion Configuration
NOTION_TOKEN=secret_abc123def456ghi789jkl012mno345pqr678stu901vwx234yz
NOTION_LEADS_DATABASE_ID=abc123def456ghi789jkl012mno345pqr678stu901vwx234yz

# Server Configuration
PORT=3000
VITE_API_BASE_URL=http://localhost:3000/api

# Security (for production)
JWT_SECRET=tu_jwt_secret_super_seguro_aqui_123456789
```

## üîß **Comandos √ötiles**

### **Verificar configuraci√≥n:**
```bash
npm run check-env
```

### **Iniciar servidor con configuraci√≥n:**
```bash
npm run dev:simple
```

### **Verificar que el servidor carga las variables:**
```bash
node unified-server.js
# Deber√≠as ver:
# ‚úÖ NOTION_TOKEN configurado
# ‚úÖ NOTION_LEADS_DATABASE_ID configurado
```

## üéØ **Estados del Sistema**

### **‚úÖ Modo Real (Configurado):**
- Conecta directamente a Notion
- Lee y escribe datos reales
- Sincronizaci√≥n bidireccional
- Panel de administraci√≥n funcional

### **‚ö†Ô∏è Modo Simulado (No configurado):**
- Usa datos de prueba
- Funciona para desarrollo
- No conecta a Notion real
- Panel de administraci√≥n con datos simulados

## üìà **Pr√≥ximos Pasos**

Una vez configurado correctamente:

1. **Probar el flujo completo:**
   - Registro de usuarios
   - Login y verificaci√≥n de estado
   - Panel de administraci√≥n
   - Cambio de roles

2. **Configurar la base de datos de Notion:**
   - Crear la estructura sugerida
   - Agregar usuarios de prueba
   - Configurar vistas y filtros

3. **Desplegar en producci√≥n:**
   - Configurar variables en Vercel
   - Probar en entorno de producci√≥n

## üéâ **Beneficios de la Configuraci√≥n**

- ‚úÖ **Datos reales** desde Notion
- ‚úÖ **Sincronizaci√≥n autom√°tica** de cambios
- ‚úÖ **Panel de administraci√≥n** funcional
- ‚úÖ **Sistema de roles** operativo
- ‚úÖ **Integraci√≥n completa** con tu workflow

¬°Con esto tendr√°s un sistema completamente funcional conectado a Notion! 